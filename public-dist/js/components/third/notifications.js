"use strict";define(["require"],function(e){var t={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1"></a>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(e){typeof e=="string"&&(e={text:e});if(e.text===null)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var n=e.title,r=e.text,i=e.image||"",s=e.imageSize||"",o=e.sticky||!1,u=e.class_name||$.gritter.options.class_name,a=e.position,f=e.time||"";this._verifyWrapper(),this._item_count++;var l=this._item_count,c=this._tpl_item;$(["before_open","after_open","before_close","after_close"]).each(function(n,r){t["_"+r+"_"+l]=$.isFunction(e[r])?e[r]:function(){}}),this._custom_timer=0,f&&(this._custom_timer=f);var h=i!=""?'<img src="'+i+'" class="gritter-image" '+(s?'style="height:'+s+'px;"':"")+" />":"",p=i!=""?"gritter-with-image":"gritter-without-image";n?n=this._str_replace("[[title]]",n,this._tpl_title):n="",c=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[n,r,this._tpl_close,h,this._item_count,p,u],c);if(this["_before_open_"+l]()===!1)return!1;$("#gritter-notice-wrapper").addClass(a).append(c);var d=$("#gritter-item-"+this._item_count);return d.fadeIn(this.fade_in_speed,function(){t["_after_open_"+l]($(this))}),o||this._setFadeTimer(d,l),$(d).bind("mouseenter mouseleave",function(e){e.type=="mouseenter"?o||t._restoreItemIfFading($(this),l):o||t._setFadeTimer($(this),l),t._hoverState($(this),e.type)}),$(d).find(".gritter-close").click(function(){return t.removeSpecific(l,{},null,!0),!1}),l},_countRemoveWrapper:function(e,t,n){t.remove(),this["_after_close_"+e](t,n),$(".gritter-item-wrapper").length==0&&$("#gritter-notice-wrapper").remove()},_fade:function(e,n,r,i){var r=r||{},s=typeof r.fade!="undefined"?r.fade:!0,o=r.speed||this.fade_out_speed,u=i;this["_before_close_"+n](e,u),i&&e.unbind("mouseenter mouseleave"),s?e.animate({opacity:0},o,function(){e.animate({height:0},300,function(){t._countRemoveWrapper(n,e,u)})}):this._countRemoveWrapper(n,e)},_hoverState:function(e,t){t=="mouseenter"?(e.addClass("hover"),e.find(".gritter-close").show()):(e.removeClass("hover"),e.find(".gritter-close").hide())},removeSpecific:function(e,t,n,r){if(!n)var n=$("#gritter-item-"+e);this._fade(n,e,t||{},r)},_restoreItemIfFading:function(e,t){clearTimeout(this["_int_id_"+t]),e.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in $.gritter.options)this[opt]=$.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(e,n){var r=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+n]=setTimeout(function(){t._fade(e,n)},r)},stop:function(e){var t=$.isFunction(e.before_close)?e.before_close:function(){},n=$.isFunction(e.after_close)?e.after_close:function(){},r=$("#gritter-notice-wrapper");t(r),r.fadeOut(function(){$(this).remove(),n()}),r.is(":visible")||(t(r),n())},_str_replace:function(e,t,n,r){var i=0,s=0,o="",u="",a=0,f=0,l=[].concat(e),c=[].concat(t),h=n,p=c instanceof Array,d=h instanceof Array;h=[].concat(h),r&&(this.window[r]=0);for(i=0,a=h.length;i<a;i++){if(h[i]==="")continue;for(s=0,f=l.length;s<f;s++)o=h[i]+"",u=p?c[s]!==undefined?c[s]:"":c[0],h[i]=o.split(l[s]).join(u),r&&h[i]!==o&&(this.window[r]+=(o.length-h[i].length)/l[s].length)}return d?h:h[0]},_verifyWrapper:function(){$("#gritter-notice-wrapper").length==0&&$("body").append(this._tpl_wrap)}},n={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3};return{add:function(e){return t.add(e||{})},remove:function(e,n){t.removeSpecific(e,n||{})},removeAll:function(e){t.stop(e||{})}}});