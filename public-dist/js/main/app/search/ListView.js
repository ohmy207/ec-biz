define(["require","ef/UIView","er/util","biz/buildUrl","esui/Dialog","er/locator","er/tpl!./list.tpl.html"],function(e){function u(){t.apply(this,arguments)}var t=e("ef/UIView"),n=e("er/util"),r=e("biz/buildUrl"),i=baidu.encodeHTML,s=e("esui/Dialog"),o=e("er/locator");n.inherits(u,t);var a=[{title:"创意名称",field:"ideaName",width:150,editable:1,content:function(e){return e.title}},{title:"单元名称",field:"unitName",content:function(e){return T.format('<div><a href="#{url}" title="#{unitName}">#{unitName}</a></div>',{url:r("/idea/list",e.unitId,"unit"),unitName:e.unitName})}},{title:"计划名称",field:"planName",content:function(e){return T.format('<div><a href="#{url}" title="#{planName}">#{planName}</a></div>',{url:r("/unit/list",e.planId,"plan"),planName:e.planName})}}];return u.prototype.uiProperties=n.mix({ListTable:{datasource:"@data.list",columnResizable:1,fields:a},ListSearch:{required:1,requiredErrorMessage:"关键字不能为空",value:"@keyword"},ListPager:{count:"@total",page:"@pageNum",pageSize:"@pageSize",pageSizes:[20,50,100],layout:"distributedReverse",pageType:"plain"}},t.prototype.uiProperties),u.prototype.uiEvents=n.mix({ListPager:{changepagesize:function(e){this.fire("changepagesize",{evt:e})},changepage:function(e){this.fire("changepage",{evt:e})}},SearchBtn:{click:function(e){var t=this.get("ListSearch");if(!t.validate())return;var n=this.get("ListSearch").getValue(),r={keyword:n},i="#/search/list~"+T.url.jsonToQuery(r);o.redirect(i)}}},t.prototype.uiEvents),e("er/tpl!./list.tpl.html"),n.mix(u.prototype,{template:"searchList",enterDocument:function(){t.prototype.enterDocument.apply(this,arguments)}}),u});